# システム設定機能

この機能では、管理者がPDF仕様書、壁紙、配色テーマを変更できます。

## 機能概要

### 1. PDF仕様書の変更
- **場所**: `/admin/settings`
- **機能**: 現在の仕様書PDFを新しいファイルに変更
- **対応形式**: PDF
- **ファイルサイズ制限**: 10MB
- **保存場所**: `storage/app/public/pdfs/spec_tomato.pdf`

### 2. 壁紙の変更
- **場所**: `/admin/settings`
- **機能**: アプリケーションの背景壁紙を変更
- **対応形式**: JPG, JPEG, PNG
- **ファイルサイズ制限**: 5MB
- **保存場所**: `storage/app/public/wallpapers/wallpaper.{拡張子}`

### 3. 配色テーマの変更
- **場所**: `/admin/settings`
- **機能**: アプリケーションの配色テーマを変更
- **利用可能テーマ**:
  - デフォルト (グレー)
  - ダーク (ダークグレー)
  - ライト (ホワイト)
  - グリーン (ライトグリーン)
  - ブルー (ライトブルー)

## 使用方法

### 管理者としてログイン
1. `/admin/login` にアクセス
2. 管理者アカウントでログイン

### 設定ページにアクセス
1. ダッシュボードの「設定」ボタンをクリック
2. または `/admin/settings` に直接アクセス

### 各設定の変更方法

#### PDF仕様書の変更
1. 「PDF仕様書の変更」セクションでファイルを選択
2. ドラッグ&ドロップまたはファイル選択ボタンを使用
3. 「PDFを更新」ボタンをクリック

#### 壁紙の変更
1. 「壁紙の変更」セクションで画像ファイルを選択
2. ドラッグ&ドロップまたはファイル選択ボタンを使用
3. プレビューで画像を確認
4. 「壁紙を更新」ボタンをクリック

#### 配色テーマの変更
1. 「配色テーマの変更」セクションでテーマを選択
2. カラープレビューで確認
3. 「テーマを更新」ボタンをクリック

## ファイル構造

```
tomato_diary/
├── app/
│   ├── Http/
│   │   └── Controllers/
│   │       └── Admin/
│   │           └── SettingController.php
│   └── Helpers/
│       └── ThemeHelper.php
├── resources/
│   └── views/
│       └── admin/
│           └── settings/
│               └── index.blade.php
├── public/
│   └── css/
│       └── admin/
│           └── settings.css
├── storage/
│   └── app/
│       └── public/
│           ├── pdfs/
│           │   └── spec_tomato.pdf
│           └── wallpapers/
│               └── wallpaper.jpg
└── routes/
    └── web.php
```

## 技術仕様

### コントローラー
- `SettingController`: 設定の管理を担当
- ファイルアップロード処理
- バリデーション
- セッション管理

### ヘルパー
- `ThemeHelper`: テーマ設定の管理
- 現在のテーマ取得
- CSSクラス生成
- 壁紙URL生成

### ビュー
- Tailwind CSS + カスタムCSS
- レスポンシブデザイン
- ドラッグ&ドロップ機能
- リアルタイムプレビュー

### セキュリティ
- ファイル形式の制限
- ファイルサイズの制限
- CSRF保護
- 管理者認証

## トラブルシューティング

### よくある問題

1. **ファイルがアップロードできない**
   - ファイルサイズ制限を確認
   - ファイル形式を確認
   - ストレージディレクトリの権限を確認

2. **テーマが反映されない**
   - ブラウザのキャッシュをクリア
   - セッションを確認

3. **壁紙が表示されない**
   - ファイルが正しく保存されているか確認
   - ファイルパスを確認

### ログの確認
```bash
tail -f storage/logs/laravel.log
```

## 今後の拡張予定

- [ ] データベースでの設定永続化
- [ ] 複数のPDFファイル管理
- [ ] 壁紙のギャラリー機能
- [ ] カスタムテーマ作成機能
- [ ] 設定のエクスポート/インポート機能 